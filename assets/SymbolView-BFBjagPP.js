import{o,c as n,a as l,n as k,F as h,r as S,t as i,b as x,d as C,_ as $,u as T,e as w,f as V,g as v,h as B,i as N,j as A,k as F,l as z,m as D}from"./index-BxARo4r7.js";const E={key:0,class:"flex flex-wrap items-center gap-2 mb-4"},R=["onClick"],U={__name:"TagFilter",props:{tags:{type:Array,default:()=>[]}},emits:["update:selected"],setup(p,{emit:f}){const y=f,c=C([]);function _(r){const m=c.value.indexOf(r);m===-1?c.value.push(r):c.value.splice(m,1),y("update:selected",[...c.value])}function d(r){return c.value.includes(r)}function e(){c.value=[],y("update:selected",[])}return(r,m)=>p.tags.length?(o(),n("div",E,[l("button",{onClick:e,class:k(["text-xs px-3 py-1.5 rounded-full transition-colors",c.value.length===0?"bg-accent-blue/20 text-accent-blue":"bg-bg-card text-text-secondary hover:text-text-primary border border-border-subtle"])}," å…¨éƒ¨ ",2),(o(!0),n(h,null,S(p.tags,u=>(o(),n("button",{key:u,onClick:b=>_(u),class:k(["text-xs px-3 py-1.5 rounded-full transition-colors",d(u)?"bg-accent-blue/20 text-accent-blue":"bg-bg-card text-text-secondary hover:text-text-primary border border-border-subtle"])},i(u),11,R))),128))])):x("",!0)}},j={class:"max-w-4xl mx-auto px-4 py-6"},G={key:0,class:"text-center py-20"},H={class:"text-text-secondary"},I={class:"mb-6"},L={class:"flex items-center gap-3 mb-2"},M={class:"text-4xl"},O={class:"font-display text-xl font-bold text-accent-blue"},P={class:"text-text-secondary text-sm"},q={key:0,class:"text-text-secondary text-sm mt-1"},J={class:"flex items-center gap-3 mt-2"},K={class:"text-text-secondary text-xs"},Q={key:0,class:"flex items-center gap-1.5"},W={class:"text-text-secondary text-xs"},X={class:"flex flex-col gap-3"},Y={key:0,class:"text-center py-10"},Z={__name:"SymbolView",setup(p){const f=A(),{getSymbol:y,state:c}=N(),{markSymbolRead:_}=B(),d=v(()=>f.params.symbol),e=v(()=>y(d.value)),r=C([]),m=v(()=>{if(!e.value?.posts)return[];const s=new Set;for(const a of e.value.posts)a.tags&&a.tags.forEach(t=>s.add(t));return[...s]}),u=v(()=>{if(!e.value?.posts)return null;const s=e.value.posts.filter(t=>t.review);if(s.length===0)return null;const a=s.reduce((t,g)=>t+g.review.accuracy,0);return{avg:Math.round(a/s.length),count:s.length}}),b=v(()=>e.value?.posts?r.value.length===0?e.value.posts:e.value.posts.filter(s=>s.tags&&s.tags.some(a=>r.value.includes(a))):[]);if(e.value?.posts?.[0]?.date){let s="";for(const a of e.value.posts)for(const t of a.notes||[])t.time>s&&(s=t.time);_(d.value,e.value.posts[0].date,s)}return(s,a)=>(o(),n("div",j,[!T(c).loading&&!e.value?(o(),n("div",G,[l("p",H,"æœªæ‰¾åˆ° Symbol: "+i(d.value),1)])):e.value?(o(),n(h,{key:1},[l("div",I,[l("div",L,[l("span",M,i(e.value.icon||"ğŸ“Š"),1),l("div",null,[l("h1",O,i(e.value.code),1),l("p",P,i(e.value.name),1)])]),e.value.description?(o(),n("p",q,i(e.value.description),1)):x("",!0),l("div",J,[l("p",K," å…± "+i(e.value.posts?.length||0)+" ç¯‡é¢„æµ‹ ",1),u.value?(o(),n("div",Q,[a[1]||(a[1]=l("span",{class:"text-text-secondary text-xs"},"å¹³å‡å‡†ç¡®ç‡",-1)),w(V,{accuracy:u.value.avg},null,8,["accuracy"]),l("span",W,"("+i(u.value.count)+" ç¯‡å¤ç›˜)",1)])):x("",!0)])]),w(U,{tags:m.value,"onUpdate:selected":a[0]||(a[0]=t=>r.value=t)},null,8,["tags"]),l("div",X,[(o(!0),n(h,null,S(b.value,(t,g)=>(o(),F(D,{key:t.folder,"symbol-code":e.value.code,"symbol-name":e.value.name,"symbol-icon":e.value.icon,date:t.date,folder:t.folder,title:t.title,subtitle:t.subtitle,summary:t.summary,tags:t.tags,review:t.review,"show-symbol":!1,style:z({animationDelay:`${g*60}ms`}),class:"animate-fade-in"},null,8,["symbol-code","symbol-name","symbol-icon","date","folder","title","subtitle","summary","tags","review","style"]))),128))]),b.value.length===0?(o(),n("div",Y,[...a[2]||(a[2]=[l("p",{class:"text-text-secondary text-sm"},"æ²¡æœ‰åŒ¹é…çš„é¢„æµ‹",-1)])])):x("",!0)],64)):x("",!0)]))}},te=$(Z,[["__scopeId","data-v-28a4797e"]]);export{te as default};
