<script setup>
import { useGitHub } from '../composables/useGitHub.js'
import LatestPosts from '../components/LatestPosts.vue'
import SymbolGrid from '../components/SymbolGrid.vue'

const { state } = useGitHub()
</script>

<template>
  <div class="max-w-4xl mx-auto px-4 py-6">
    <!-- åŠ è½½ä¸­ -->
    <div v-if="state.loading" class="flex items-center justify-center py-20">
      <div class="text-text-secondary text-sm">åŠ è½½ä¸­...</div>
    </div>

    <!-- åŠ è½½é”™è¯¯ -->
    <div v-else-if="state.error" class="flex flex-col items-center justify-center py-20 gap-3">
      <div class="text-red-400 text-sm">{{ state.error }}</div>
      <p class="text-text-secondary text-xs">è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥ååˆ·æ–°é¡µé¢</p>
    </div>

    <!-- å†…å®¹ -->
    <template v-else>
      <SymbolGrid />
      <LatestPosts />

      <!-- ç¤¾åŒºé“¾æ¥ -->
      <div class="mt-10 pt-6 border-t border-border-subtle text-center">
        <p class="text-text-secondary text-sm mb-3">æ¬¢è¿åŠ å…¥ Telegram é¢‘é“ï¼Œè·å–æœ€æ–°é¢„æµ‹æ¨é€</p>
        <div class="flex items-center justify-center gap-3 flex-wrap">
          <a
            href="https://t.me/IChingTrading"
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center gap-1.5 text-sm px-4 py-2 rounded-lg bg-accent-blue/10 text-accent-blue hover:bg-accent-blue/20 transition-colors"
          >
            ğŸ“¢ ICH Trading é¢‘é“
          </a>
          <a
            href="https://t.me/kodatao"
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center gap-1.5 text-sm px-4 py-2 rounded-lg bg-accent-gold/10 text-accent-gold hover:bg-accent-gold/20 transition-colors"
          >
            ğŸ’¬ è”ç³»ä½œè€…
          </a>
          <a
            href="/ich-trading/feed.xml"
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center gap-1.5 text-sm px-4 py-2 rounded-lg bg-orange-500/10 text-orange-400 hover:bg-orange-500/20 transition-colors"
          >
            ğŸ“¡ RSS è®¢é˜…
          </a>
          <router-link
            to="/support"
            class="inline-flex items-center gap-1.5 text-sm px-4 py-2 rounded-lg bg-red-500/10 text-red-400 hover:bg-red-500/20 transition-colors"
          >
            â˜• æ”¯æŒä½œè€…
          </router-link>
        </div>
      </div>
    </template>
  </div>
</template>
